---
import { Image } from 'astro:assets';

import PostImageCaption from './PostImageCaption.astro';

export interface Props {
  src: ImageMetadata;
  alt: string;
  caption?: string;
  maxWidth?: string;
  class?: string;
  showCaption?: boolean;
}

const { src, alt, maxWidth = '600px', class: className, showCaption = true, ...rest } = Astro.props;
---

<figure class={`my-6 flex flex-col items-center w-full ${className || ''}`}>
  <Image
    src={src}
    alt={alt}
    style={`max-width: ${maxWidth}; height: auto; object-fit: contain;`}
    class="block h-auto max-w-full rounded-lg"
    {...rest}
  />
  {showCaption && <PostImageCaption caption={rest.caption ?? alt} />}
</figure>
