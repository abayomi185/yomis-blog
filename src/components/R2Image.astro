---
import PostImage from './PostImage.astro';

export interface Props {
  key: string;
  alt: string;
  caption?: string;
  maxWidth?: string;
  class?: string;
  showCaption?: boolean;
  width?: number;
  height?: number;
}

const { key, ...rest } = Astro.props;

const CLOUDFLARE_R2_URL = import.meta.env.CLOUDFLARE_R2_URL;

if (!CLOUDFLARE_R2_URL) {
  throw new Error('CLOUDFLARE_R2_URL environment variable is not set');
}

// Construct the full image URL
const imageUrl = `${CLOUDFLARE_R2_URL}/${key}`;
---

<PostImage key={imageUrl} {...rest} />
